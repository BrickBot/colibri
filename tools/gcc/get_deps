#!/bin/bash

function get_deps () {
    deps="$@"

    echo "# dependencies generated by tools/gcc/get_deps"
    echo "# do not edit"

    for e in $deps; do
    
	nc=`echo -ne $e | wc -c`
	ne=`echo -ne $e | cut -c 1-$(($nc-2))`

	echo -ne "${ne}.o:"
	cat $e | cut -d ":" -f 2
    done;
}

if [ $# -eq 0 ]; then
	echo "usage: $0 dependency-files"
	exit 1
fi

get_deps "$@"

exit $?